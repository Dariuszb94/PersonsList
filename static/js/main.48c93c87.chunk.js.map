{"version":3,"sources":["Components/PersonsList/PersonsList.js","Components/Edit/Edit.js","Components/Person/Person.js","App.js","reportWebVitals.js","index.js"],"names":["PersonsList","setPeopleList","peopleList","useState","people","setPeople","db","Dexie","version","stores","persons","useEffect","length","updateDB","console","log","a","toArray","fetchedDB","JSON","stringify","history","useHistory","getPeople","clear","preDB","i","push","name","title","first","last","email","phone","picture","large","bulkAdd","axios","then","res","data","results","onClick","updatedPeople","concat","map","person","index","id","Edit","setName","surname","setSurname","setPhone","setEmail","emailInvalid","setEmailInvalid","phoneInvalid","setPhoneInvalid","personID","useParams","handleSubmit","e","preventDefault","peopleListPrev","validationMail","validationPhone","backToDetails","test","String","toLowerCase","onSubmit","type","value","onChange","target","className","Person","src","App","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.48c93c87.chunk.js","sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\nimport Dexie from \"dexie\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nconst PersonsList = ({ setPeopleList, peopleList }) => {\n  const [people, setPeople] = useState([]);\n  //const [preDBUpdate, setPreDBUpdate] = useState([]);\n\n  const db = new Dexie(\"PersonsDB\");\n  db.version(1).stores({\n    persons: \"++id, name, age\",\n  });\n  useEffect(() => {\n    if (people.length) {\n      updateDB();\n    }\n    console.log(people);\n    setPeopleList(people);\n  }, [people]);\n  useEffect(async () => {\n    const fetchedDB = await db.persons.toArray();\n    if (\n      peopleList.length &&\n      JSON.stringify(peopleList) != JSON.stringify(fetchedDB)\n    ) {\n      updateDB();\n    }\n  }, [peopleList]);\n  const history = useHistory();\n\n  const goDetails = (id) => {\n    history.push(`/details/${id}`);\n  };\n  // useEffect(() => {\n  //   console.log(\"asdasd\");\n  //   if ()\n  //     console.log(\"asdasd\");\n  //   //  setPeople(peopleList);\n  // }, [peopleList]);\n  useEffect(async () => {\n    const fetchedDB = await db.persons.toArray();\n\n    if (fetchedDB.length > 0) {\n      setPeople(fetchedDB);\n      return;\n    } else {\n      getPeople();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const updateDB = async () => {\n    await db.persons.clear();\n    var preDB = [];\n    for (let i = 0; i < people.length; ++i) {\n      preDB.push({\n        name: {\n          title: people[i].name.title,\n          first: people[i].name.first,\n          last: people[i].name.last,\n        },\n        email: people[i].email,\n        phone: people[i].phone,\n        picture: { large: people[i].picture.large },\n      });\n    }\n    db.persons.bulkAdd(preDB);\n  };\n  const getPeople = () => {\n    const url = \"https://randomuser.me/api/?results=10\";\n    axios(url).then((res) => {\n      setPeople(res.data.results);\n      console.log(res.data.results);\n    });\n  };\n  const addPeople = () => {\n    const url = \"https://randomuser.me/api/?results=2\";\n    axios(url).then((res) => {\n      const prevPeople = people;\n      const updatedPeople = prevPeople.concat(res.data.results);\n      setPeople(updatedPeople);\n    });\n  };\n  return (\n    <section>\n      <button\n        onClick={() => {\n          addPeople();\n        }}\n      >\n        add\n      </button>\n\n      <button\n        onClick={() => {\n          getPeople();\n        }}\n      >\n        reset\n      </button>\n      {people.map((person, index) => (\n        <li key={index}>\n          {person.name.title}\n          {person.name.first}\n          {person.name.last}\n          {person.name.phone}\n          {person.name.email}\n          <button\n            onClick={() => {\n              goDetails(index);\n            }}\n          >\n            details{index}\n          </button>\n        </li>\n      ))}\n    </section>\n  );\n};\nexport default PersonsList;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Edit.scss\";\nconst Edit = ({ peopleList, setPeopleList }) => {\n  const [people, setPeople] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [surname, setSurname] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [emailInvalid, setEmailInvalid] = useState(false);\n  const [phoneInvalid, setPhoneInvalid] = useState(false);\n\n  let { personID } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    setPeople(peopleList);\n  }, [peopleList]);\n  useEffect(() => {\n    if (peopleList[personID]) {\n      setName(peopleList[personID].name.first);\n      setSurname(peopleList[personID].name.last);\n      setPhone(peopleList[personID].phone);\n      setEmail(peopleList[personID].email);\n    }\n  }, [peopleList]);\n  useEffect(() => {\n    //if (JSON.stringify(peopleList) !== JSON.stringify(people))\n    // setPeopleList(people);\n  }, [people]);\n  const handleChangeName = (e) => {\n    setName(e.target.value);\n  };\n  const handleChangeSurname = (e) => {\n    setSurname(e.target.value);\n  };\n  const handleChangeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n  const handleChangePhone = (e) => {\n    setPhone(e.target.value);\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const peopleListPrev = [...peopleList];\n    validationMail();\n    peopleListPrev[personID].name.first = name;\n    peopleListPrev[personID].name.last = surname;\n    peopleListPrev[personID].email = email;\n    peopleListPrev[personID].phone = phone;\n    if (validationMail() && validationPhone()) {\n      setPeopleList(peopleListPrev);\n    } else {\n      return false;\n    }\n    backToDetails();\n  };\n  function validationMail() {\n    const mailRegex =\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if (mailRegex.test(String(email).toLowerCase())) {\n      setEmailInvalid(false);\n      return true;\n    } else {\n      setEmailInvalid(true);\n      console.log(\"nok\");\n      return false;\n    }\n  }\n  function validationPhone() {\n    const phoneRegex = /^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/g;\n    if (phoneRegex.test(String(phone).toLowerCase())) {\n      setPhoneInvalid(false);\n      return true;\n    } else {\n      setPhoneInvalid(true);\n      return false;\n    }\n  }\n  const backToDetails = () => {\n    history.push(`/details/${personID}`);\n  };\n  return (\n    <section>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label> first name</label>\n          <input type=\"text\" value={name} onChange={handleChangeName} />\n        </div>\n        <div>\n          <label> last name</label>\n          <input type=\"text\" value={surname} onChange={handleChangeSurname} />\n        </div>\n        <div>\n          <label>Phone</label>\n          <input\n            type=\"text\"\n            value={phone}\n            onChange={handleChangePhone}\n            className={`${phoneInvalid ? \"invalid\" : \"\"}`}\n          />\n        </div>\n        <div>\n          <label>Email</label>\n          <input\n            type=\"text\"\n            value={email}\n            onChange={handleChangeEmail}\n            className={`${emailInvalid ? \"invalid\" : \"\"}`}\n          />\n        </div>\n        <input type=\"submit\" value=\"WyÅ›lij\" />\n      </form>\n    </section>\n  );\n};\nexport default Edit;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\nconst Person = ({ peopleList }) => {\n  const [people, setPeople] = useState([]);\n  let { personID } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    setPeople(peopleList);\n  }, [peopleList]);\n\n  const edit = (id) => {\n    history.push(`/edit/${id}`);\n  };\n  return (\n    <section>\n      {people[personID] ? (\n        <article className=\"details\">\n          <img src={people[personID].picture.large} />\n          {console.log(people[personID])}\n          <div className=\"details__names\">\n            <div>{people[personID].name.title}</div>\n            <div>{people[personID].name.first}</div>\n            <div>{people[personID].name.last}</div>\n          </div>\n          <div className=\"details__contact\">\n            <div>{people[personID].phone}</div>\n            <div>{people[personID].email}</div>\n          </div>\n        </article>\n      ) : null}\n\n      <button\n        onClick={() => {\n          edit(personID);\n        }}\n      >\n        edit\n      </button>\n    </section>\n  );\n};\nexport default Person;\n","import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport PersonsList from \"./Components/PersonsList/PersonsList\";\nimport Edit from \"./Components/Edit/Edit\";\nimport Person from \"./Components/Person/Person\";\n\nfunction App() {\n  const [peopleList, setPeopleList] = useState([]);\n\n  return (\n    <Router>\n      <section className=\"body-layout\">\n        <PersonsList setPeopleList={setPeopleList} peopleList={peopleList} />\n\n        <Switch>\n          <Route path=\"/edit/:personID\">\n            <Edit peopleList={peopleList} setPeopleList={setPeopleList} />\n          </Route>\n          <Route path=\"/details/:personID\">\n            <Person peopleList={peopleList} />\n          </Route>\n        </Switch>\n      </section>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}