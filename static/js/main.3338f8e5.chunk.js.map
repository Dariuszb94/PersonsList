{"version":3,"sources":["Components/PersonsList/PersonsList.js","Components/Edit/Edit.js","Components/Person/Person.js","App.js","reportWebVitals.js","index.js"],"names":["PersonsList","setPeopleList","peopleList","active","useState","people","setPeople","error","setError","list","useRef","db","Dexie","a","persons","toArray","fetchedDB","length","JSON","stringify","updateDB","version","stores","useEffect","checkDB","history","useHistory","getPeople","checkGet","clear","preDB","i","push","name","title","first","last","email","phone","picture","large","bulkAdd","axios","then","res","data","results","catch","scrollToAdded","current","scrollTop","scrollHeight","className","onClick","updatedPeople","concat","ref","map","person","index","id","Edit","setName","surname","setSurname","setPhone","setEmail","image","setImage","emailInvalid","setEmailInvalid","phoneInvalid","setPhoneInvalid","personID","useParams","handleSubmit","e","preventDefault","peopleListPrev","validationMail","validationPhone","backToDetails","test","String","toLowerCase","onSubmit","src","alt","type","value","onChange","target","Person","setActive","parseInt","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3338f8e5.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Dexie from \"dexie\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nimport \"./PersonsList.scss\";\nconst PersonsList = ({ setPeopleList, peopleList, active }) => {\n  const [people, setPeople] = useState([]);\n  const [error, setError] = useState(false);\n  const list = useRef(null);\n  const db = new Dexie(\"PersonsDB\");\n  db.version(1).stores({\n    persons: \"++id\",\n  });\n  useEffect(() => {\n    if (people.length) {\n      updateDB();\n    }\n    setPeopleList(people);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [people, setPeopleList]);\n  useEffect(() => {\n    checkDB();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [peopleList]);\n  async function checkDB() {\n    const fetchedDB = await db.persons.toArray();\n\n    if (\n      peopleList.length &&\n      JSON.stringify(peopleList) !== JSON.stringify(fetchedDB)\n    ) {\n      updateDB();\n    }\n  }\n  const history = useHistory();\n\n  const goDetails = (id) => {\n    history.push(`/details/${id}`);\n  };\n\n  useEffect(() => {\n    checkGet();\n  }, []);\n  async function checkGet() {\n    const fetchedDB = await db.persons.toArray();\n\n    if (fetchedDB.length > 0) {\n      setPeople(fetchedDB);\n      return;\n    } else {\n      getPeople();\n    }\n  }\n  const updateDB = async () => {\n    await db.persons.clear();\n    var preDB = [];\n    for (let i = 0; i < people.length; ++i) {\n      preDB.push({\n        name: {\n          title: people[i].name.title,\n          first: people[i].name.first,\n          last: people[i].name.last,\n        },\n        email: people[i].email,\n        phone: people[i].phone,\n        picture: { large: people[i].picture.large },\n      });\n    }\n    db.persons.bulkAdd(preDB);\n  };\n  const getPeople = () => {\n    const url = \"https://randomuser.me/api/?results=10\";\n    axios(url)\n      .then((res) => {\n        setPeople(res.data.results);\n      })\n      .catch(function () {\n        setError(true);\n      });\n  };\n  const addPeople = () => {\n    const url = \"https://randomuser.me/api/?results=2\";\n    axios(url)\n      .then((res) => {\n        const prevPeople = people;\n        const updatedPeople = prevPeople.concat(res.data.results);\n        setPeople(updatedPeople);\n        scrollToAdded();\n      })\n      .catch(function () {\n        setError(true);\n      });\n  };\n  const scrollToAdded = () => {\n    list.current.scrollTop = list.current.scrollHeight;\n  };\n  return (\n    <section className=\"persons-list-container\">\n      <h1 className=\"persons-list__header\">List of people</h1>\n      <div className=\"actions\">\n        <button\n          className=\"actions__modify-list\"\n          onClick={() => {\n            addPeople();\n          }}\n        >\n          add\n        </button>\n\n        <button\n          className=\"actions__modify-list\"\n          onClick={() => {\n            getPeople();\n          }}\n        >\n          reset\n        </button>\n      </div>\n      {error ? <div className=\"error\">Error occured</div> : null}\n      <ul ref={list} className=\"persons-list\">\n        {people.map((person, index) => (\n          <li\n            className={`persons-list__person ${\n              index === active ? \"active\" : \"\"\n            }`}\n            key={index}\n            onClick={() => {\n              goDetails(index);\n            }}\n          >\n            {person.name.title} {person.name.first} {person.name.last}\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n};\nexport default PersonsList;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Edit.scss\";\nconst Edit = ({ peopleList, setPeopleList }) => {\n  const [people, setPeople] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [surname, setSurname] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n\n  const [emailInvalid, setEmailInvalid] = useState(false);\n  const [phoneInvalid, setPhoneInvalid] = useState(false);\n\n  let { personID } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    setPeople(peopleList);\n  }, [peopleList]);\n  useEffect(() => {\n    if (peopleList[personID]) {\n      setName(peopleList[personID].name.first);\n      setSurname(peopleList[personID].name.last);\n      setPhone(peopleList[personID].phone);\n      setEmail(peopleList[personID].email);\n      setImage(peopleList[personID].picture.large);\n    }\n  }, [peopleList, personID]);\n  useEffect(() => {\n    //if (JSON.stringify(peopleList) !== JSON.stringify(people))\n    // setPeopleList(people);\n  }, [people]);\n  const handleChangeName = (e) => {\n    setName(e.target.value);\n  };\n  const handleChangeSurname = (e) => {\n    setSurname(e.target.value);\n  };\n  const handleChangeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n  const handleChangePhone = (e) => {\n    setPhone(e.target.value);\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const peopleListPrev = [...peopleList];\n    validationMail();\n    peopleListPrev[personID].name.first = name;\n    peopleListPrev[personID].name.last = surname;\n    peopleListPrev[personID].email = email;\n    peopleListPrev[personID].phone = phone;\n    if (validationMail() && validationPhone()) {\n      setPeopleList(peopleListPrev);\n    } else {\n      return false;\n    }\n    backToDetails();\n  };\n  function validationMail() {\n    const mailRegex =\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if (mailRegex.test(String(email).toLowerCase())) {\n      setEmailInvalid(false);\n      return true;\n    } else {\n      setEmailInvalid(true);\n      return false;\n    }\n  }\n  function validationPhone() {\n    const phoneRegex = /^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s./0-9]*$/g;\n    if (phoneRegex.test(String(phone).toLowerCase())) {\n      setPhoneInvalid(false);\n      return true;\n    } else {\n      setPhoneInvalid(true);\n      return false;\n    }\n  }\n  const backToDetails = () => {\n    history.push(`/details/${personID}`);\n  };\n  return (\n    <section>\n      <form onSubmit={handleSubmit}>\n        <img src={image} alt={`${name}`} />\n        <div>\n          <label> first name</label>\n          <input type=\"text\" value={name} onChange={handleChangeName} />\n        </div>\n        <div>\n          <label> last name</label>\n          <input type=\"text\" value={surname} onChange={handleChangeSurname} />\n        </div>\n        <div>\n          <label>Phone</label>\n          <input\n            type=\"text\"\n            value={phone}\n            onChange={handleChangePhone}\n            className={`${phoneInvalid ? \"invalid\" : \"\"}`}\n          />\n        </div>\n        <div>\n          <label>Email</label>\n          <input\n            type=\"text\"\n            value={email}\n            onChange={handleChangeEmail}\n            className={`${emailInvalid ? \"invalid\" : \"\"}`}\n          />\n        </div>\n        <input type=\"submit\" value=\"Wyślij\" />\n      </form>\n    </section>\n  );\n};\nexport default Edit;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Person.scss\";\nconst Person = ({ peopleList, setActive }) => {\n  const [people, setPeople] = useState([]);\n  let { personID } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    setPeople(peopleList);\n  }, [peopleList]);\n  useEffect(() => {\n    setActive(parseInt(personID));\n  }, [personID, setActive]);\n  const edit = (id) => {\n    history.push(`/edit/${id}`);\n  };\n  return (\n    <section className=\"details-container\">\n      {people[personID] ? (\n        <article className=\"details\">\n          <img\n            className=\"details__img\"\n            src={people[personID].picture.large}\n            alt={`${people[personID].name.first}`}\n          />\n          <div className=\"details__names\">\n            <h2 className=\"details__names__header\">Name</h2>\n            <div>{people[personID].name.title}</div>\n            <div>{people[personID].name.first}</div>\n            <div>{people[personID].name.last}</div>\n          </div>\n          <div className=\"details__contact\">\n            <h2 className=\"details__contact__header\">Contact</h2>\n            <div>{people[personID].phone}</div>\n            <div>{people[personID].email}</div>\n          </div>\n        </article>\n      ) : null}\n\n      <button\n        className=\"edit\"\n        onClick={() => {\n          edit(personID);\n        }}\n      >\n        edit\n      </button>\n    </section>\n  );\n};\nexport default Person;\n","import React, { useState } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport \"./App.scss\";\nimport PersonsList from \"./Components/PersonsList/PersonsList\";\nimport Edit from \"./Components/Edit/Edit\";\nimport Person from \"./Components/Person/Person\";\n\nfunction App() {\n  const [peopleList, setPeopleList] = useState([]);\n  const [active, setActive] = useState();\n\n  return (\n    <HashRouter>\n      <div className=\"body-layout\">\n        <PersonsList\n          setPeopleList={setPeopleList}\n          peopleList={peopleList}\n          active={active}\n        />\n\n        <Switch>\n          <Route path=\"/edit/:personID\">\n            <Edit peopleList={peopleList} setPeopleList={setPeopleList} />\n          </Route>\n          <Route exact path=\"/details/:personID\">\n            <Person peopleList={peopleList} setActive={setActive} />\n          </Route>\n        </Switch>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}